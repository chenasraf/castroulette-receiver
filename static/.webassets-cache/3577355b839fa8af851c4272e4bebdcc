Vvar APP_ID, castReveivers, initializeCastApi, onLaunch, onMsgReceivedByCc, onReceiverList, ref, sendMessageToCc, senderInit;\u000a\u000acastReveivers = {};\u000a\u000aAPP_ID = '6684D5DF';\u000a\u000asenderInit = function() {\u000a  var e, endpoint, error, socker;\u000a  try {\u000a    endpoint = "http://" + SOCKETIO_HOST + ":" + SOCKETIO_PORT;\u000a    socker = io.connect(endpoint);\u000a  } catch (error) {\u000a    e = error;\u000a    console.error(e);\u000a    return;\u000a  }\u000a  socket.on('relay', data(function() {\u000a    return console.debug('socket relay', data);\u000a  }));\u000a  return socket.on('');\u000a};\u000a\u000ainitializeCastApi = function() {\u000a  var castApi;\u000a  castApi = new cast.Api();\u000a  return castApi.addReceiveListener(APP_ID, onReceiverList);\u000a};\u000a\u000aonReceiverList = function(receivers) {\u000a  var i, launchRequest, len, receiver, results;\u000a  if (!receivers.length) {\u000a    return;\u000a  }\u000a  results = [];\u000a  for (i = 0, len = receivers.length; i < len; i++) {\u000a    receiver = receivers[i];\u000a    console.debug('receiver', receiver);\u000a    castReceivers[receiver.name] = receiver;\u000a    launchRequest = new cast.LaunchRequest(APP_ID, receiver);\u000a    launchRequest.parameters = '';\u000a    results.push(castApi.launch(launchRequest, onLaunch(receiver)));\u000a  }\u000a  return results;\u000a};\u000a\u000aonLaunch = function(receiver) {\u000a  return function(activity) {\u000a    switch (activity.status) {\u000a      case 'running':\u000a        castReceivers[receiver.name].activity_id = activity.activityId;\u000a        console.debug('receiver has received launch command');\u000a        return window.setTimeout(function() {\u000a          return sendMessageToCc({\u000a            type: 'message',\u000a            body: 'ready'\u000a          }, activity.activityId);\u000a        });\u000a      case 'error':\u000a        delete castReceivers[receiver.name].activityId;\u000a        return console.debug('receiver error on launch command');\u000a    }\u000a  };\u000a};\u000a\u000asendMessageToCc = function(msg, activityId) {\u000a  return castApi.sendMessage(activityId, 'e2e', msg, onMsgReceivedByCc);\u000a};\u000a\u000aonMsgReceivedByCc = function(msg) {\u000a  if (msg != null) {\u000a    return console.debug(msg);\u000a  }\u000a};\u000a\u000aif ((ref = window.cast) != null ? ref.isAvailable : void 0) {\u000a  console.debug('cast api available');\u000a  initializeApi();\u000a} else {\u000a  window.addEventListener('message', function(e) {\u000a    var ref1, ref2;\u000a    if (e.source === window && ((ref1 = event.data) != null ? ref1.source : void 0) === 'CastApi' && ((ref2 = event.data) != null ? ref2.event : void 0) === 'Hello') {\u000a      return initializeCastApi();\u000a    }\u000a  });\u000a}\u000a
p1
.